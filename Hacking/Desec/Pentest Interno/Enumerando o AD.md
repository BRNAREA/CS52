<h1 align="center">Coletando informacoes do servidor AD</h1>
<hr>

Uma vez que a gente ja validou as credenciais conseguimos o shell no usuario da fernanda , a gente precisa evoluir no ataque e descobrir quais sao os usuarios chaves pro nosso ataque , os que vao abrir e que atraves deles podemos chegar ate o AD .

Pra isso precisamos fazer uma coleta de informacoes diretamente no servidor utilizando essas credenciais.

Como vimos com os usuarios que pegamos , podemos nos autenticar no servidor , nao conseguimos uma shell , mas pelo menos a gente consegue nos autenticar no servidor e isso nos possibilita fazer enumeracoes no servidor.

No modulo de Enumeracao falamos sobre o `rpcclient` , no qual eh um utilitario que podemos utilizar pra conversar diretamente com o servidor, quando a gente tem credenciais validas a gente pode utilizar elas pra buscar mais informacoes sobre o servidor , e isso pode ser extremamente importante

```sh
rpcclient -W orionscorp2 -U mfernanda <IP DO SERVIDOR !>
rpcclient $>
```

Perfeito conseguimos. 
O primeiro comando que a gente pode utilizar aqui eh o `enumdomuser` pra enumerar os usuarios do dominio.

Podemos usar tmb o `getusername` e `queryuser [rid]`, mas oque eh interessante pra nos eh saber quais usuarios desses do dominio que seria um usuario com permissoes administrativas

E ai poderiamos usar o  `enumdomgroups`, pra vermos os grupos:

```sh
rpcclient $> enumdomgroups
```

No caso queremos ver administradores do dominio certo ? vamos pegar o rid dele e fazer uma pesquisa com `querygroup` e ele nos mostra informacoes sobre o grupo

```sh
rpcclient $> querygroup [rid]
```

E entao podemos usar o `querygroupmem` para ver os membros desse grupo:

```sh
rpcclient $> querygroupmem [rid]
rpcclient $> queryuser [rid] ;; from querygroupmem !
```

Agora que sabemos quem tem privilegio administrativo vamos mirar nele. !

Como fazemos isso?

A gente pode utilizar o acesso da mfernanda, nos vimos que temos uma shell na maquina dela poderiamos tentar extrair informacoes credenciais em memorias , hashes etc..e outro ponto uma vez que temos acesso na maquina vai depender de qual departamento essa pessoa trabalha. Isso pode abrir mais informacoes dentro do ambiente